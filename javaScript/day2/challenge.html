<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>도전문제 -[구조분해, spread연산]</title>
  </head>
  <body>
    <script type="text/javascript">
      /* React -> tag와 javascript code를 같이 쓴다. */

      let items = [
        { id: 1, name: '벤치프레스', count: 10 },
        { id: 2, name: '랫풀다운', count: 12 },
        { id: 3, name: '스쿼트', count: 30 },
      ];

      /* CREATE - spread */
      /* 배열만 있을 때, 객체만 있을 때, 배열안에 객체가 있을 때 */

      let items_copy = [
        ...items,
        { id: items.length, name: '숄더프레스', count: 0 },
      ];

      document.write('<div>');
      document.write("<table border='1' borderColor='green'>");
      document.write('<thead>CREATE</thead>');
      items_copy.forEach((item) => {
        document.write('<tr>');
        document.write(`<td>${item.id}</td>`);
        document.write(`<td>${item.name}</td>`);
        document.write(`<td>${item.count}</td>`);
        document.write('</tr>');
      });
      document.write('</table>');
      document.write('</div>');

      /* UPDATE - spread*/

      let result = -1;
      let updateItems = [...items];
      result = window.prompt('수정하고자 하는 id를 입력하세요.');
      updateItems.forEach((item) => {
        if (item.id === parseInt(result)) {
          updateItems = items.filter((item) => item.id !== parseInt(result));
          updateItems = [
            ...updateItems,
            { id: `${parseInt(result)}`, name: '덤벨프레스', count: 15 },
          ];
        }
      });
      document.write('<div>');
      document.write("<table border='1' borderColor='green'>");
      document.write('<thead>UPDATE</thead');
      updateItems.forEach((item) => {
        document.write('<tr>');
        document.write(`<td>${item.id}</td>`);
        document.write(`<td>${item.name}</td>`);
        document.write(`<td>${item.count}</td>`);
        document.write('</tr>');
      });
      document.write('</table>');
      document.write('</div>');

      /* DELETE - filter */

      /* items.shift(); shift(): 배열의 첫 부분 요소 제거(리턴값으로 잘라낸 요소 반환)
         items.pop();  pop(): 배열의 마지막 요소 제거(리턴값으로 잘라낸 요소 반환) */

      let deleteResult = -1;
      deleteResult = window.prompt('삭제하고자 하는 id를 입력하세요.');
      alert('사용자가 선택한 아이디는' + result + '입니다.');
      /* prompt로 받으면 반환값이 문자열이다. -주의 (===, !== 사용시 타입도 따지니까) */
      /* filter 함수는 조건을 수렴하는 것만 남겨서 새로운 배열을 반환한다. */
      let newItems = items.filter((row) => row.id !== parseInt(deleteResult));

      document.write('<div>');
      document.write("<table border='1' borderColor='green'>");
      document.write('<thead>DELETE</thead>');
      newItems.forEach((item) => {
        document.write('<tr>');
        document.write(`<td>${item.id}</td>`);
        document.write(`<td>${item.name}</td>`);
        document.write(`<td>${item.count}</td>`);
        document.write('</tr>');
      });
      document.write('</table>');
      document.write('</div>');

      /* READ - forEach */

      /* <태그 속성명 = 값>내용</태그> */
      document.write('<div>');
      document.write("<table border='1' borderColor='green'>");
      document.write('<thead>SELECT</thead>');
      items.forEach((item) => {
        document.write('<tr>');
        document.write(`<td>${item.id}</td>`);
        document.write(`<td>${item.name}</td>`);
        document.write(`<td>${item.count}</td>`);
        document.write('</tr>');
      });
      document.write('</table>');
      document.write('</div>');
    </script>
  </body>
</html>
